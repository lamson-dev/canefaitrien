<!-- All our projects begin with the project tag -->
<project name="M4" basedir="." default="all">

    <!-- our init target is a prereq for everything -->
    <target name="init">

        <property name="src.dir"      value="src" />
        <property name="build.dir"    value="build" />
        <property name="classes.dir"  value="${build.dir}/classes"/>
        <property name="jar.dir"      value="${build.dir}/jar"/>
        <property name="apidoc.dir"   value="apidoc" />        
        <property name="main-class"   value="edu.gatech.oad.antlab.pkg1.AntLabMain"/>
        <property name="class-path"   value="lib/resources.jar" />

    </target>

    <!-- clean up all files generated by the build -->
    <target name="clean" depends="init" >

        <delete dir="${build.dir}" />

    </target>

    <!-- prepare is a prereq for most tasks except cleanup -->
    <target name="prepare" depends="init">

        <mkdir dir="${build.dir}" />

    </target>
   
    <!-- compile the code -->
    <target name="compile" depends="prepare">

        <mkdir dir="${classes.dir}"/>

        <javac srcdir="${src.dir}"
              destdir="${classes.dir}" 
              classpath="${class-path}"> 
        </javac>

    </target>

    <target name="javadoc">
      
        <javadoc sourcepath="${src.dir}" access="public" destdir="${apidoc.dir}"
            packagenames="edu.gatech.oad.antlab">

            <!-- <excludepackage name="edu.gt.cs2340.lab2.test.*"/> -->

            <fileset dir="${src.dir}">
                <include name="**/*.java" />
            </fileset>

            <bottom>
                <![CDATA[<i>Copyright &#169; 2012 CaNeFaitRien (Team 31) CS2340. All Rights Reserved.</i>]]>
            </bottom>
        </javadoc>        

    </target>

    <!-- make jar -->
    <target name="jar" depends="compile">

        <mkdir dir="${jar.dir}"/>

        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">

            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>
                <attribute name="Class-Path" value="${class-path}" />
            </manifest>

        </jar>

    </target>
   
    <!-- run the application -->
    <target name="run" depends="jar">

        <java jar="${jar.dir}/${ant.project.name}.jar" fork="true"/>

    </target>

    <target name="clean-build" depends="clean,jar"/>

    <target name="main" depends="clean,run"/>
   

    <!-- run all tasks except cleanup -->
    <target name="all" depends="run" />

</project>